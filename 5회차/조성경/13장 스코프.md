
## 13.1 스코프(유효범위)란?
---
- 스코프란 코드의 어떤 부분이 변수(또는 함수, 클래스 등)에 접근할 수 있는지를 정하는 규칙
- 어디에 선언되어 있는지에 따라 유효 범위가 결정


## 13.2 스코프의 종류
변수는 자신이 선언된 위치(전역 또는 지역)에 의해 자신이 유효한 범위 즉 스코프가 결정된다.

### 13.2.1 전역과 전역 스코프
- 전역 스코프에 있는 변수는 코드 어디에서든 사용이 가능하다.
- 마치 학교에서의 방송과 같다.

### 13.2.2 지역과 함수 스코프
- 지역이란 함수 몸체 내부를 말한다.
- 마치 교실에서 친구들끼리 나누는 이야기와 같다.
- 교실 안에서만 그 이야기를 들을 수 있고, 교실 밖에서는 그 이야기를 들을 수 없어요.
```javascript
function exampleFunction() {
    var a = "hello";
    console.log(a); // 출력: "hello"
}

exampleFunction();
console.log(a); // 오류: a는 정의되지 않았습니다.
```

### 13.2.3 블록 스코프
- 중괄호 `{}`로 둘러싸인 어떤 영역(예: `if` 문, `for` 루프, `while` 루프 등) 안에서만 변수가 유효
- 교실 구석에서 조그맣게 이야기하는 것
```javascript
if (true) {
    let b = "hello";
    console.log(b); // 출력: "hello"
}

console.log(b); // 오류: b는 정의되지 않았습니다.
```


## 13.3 스코프 체인

- 자바스크립트엔진에서 변수를 찾을때 코드의 현재 스코프에서 시작하여 상위 스코프로 순차적으로 이동하면서 변수나 함수를 찾는 과정을 가진다.


![](https://i.imgur.com/VQvuUaL.png)
  
글로벌 실행 컨텍스트의 스코프 체인은 3개의 변수에 대한 참조를 가지고 있습니다: 

`getPersonInfo` 함수에서 변수에 접근하려고 할 때, 엔진은 먼저 **로컬 스코프 체인을 확인**합니다.
![](https://i.imgur.com/kYmfNe7.gif)
  
**로컬 스코프 체인**은 `name`과 `age`에 대한 참조를 가지고 있습니다! 이름은 'Sarah'이고, 나이는 22입니다. 그런데, `city`를 접근하려고 할 때는 어떻게 될까요?

'city'의 값을 찾기 위해 엔진은 "스코프 체인을 따라 내려갑니다".
![](https://i.imgur.com/JHPqmDs.gif)

  
`글로벌 컨텍스트`에서 'San Francisco'라는 값으로 `'city'`라는 변수를 선언했기 때문에, 이 변수에 대한 참조가 있습니다. 이제 변수에 대한 값이 있으므로, `getPersonInfo` 함수는 "Sarah는 22살이며 San Francisco에 삽니다 🎉"라는 문자열을 반환할수 있다.

여기 `scope chain`에 특징이 하나 있는데 `Scope Chain`에 따라 외부 스코프로 이동할 수 있지만 내부의 스코프로는 이동할수 없다.

![](https://i.imgur.com/QMIQPKQ.png)

아래 소스코드를 살펴보면 `city`의 경우 Reference Error을 나타낸다.

![](https://i.imgur.com/GmIJf9a.gif)


## 13.4 렉시컬 스코프
- 함수를 어디서 호출했는지가 아니라 함수를 어디에서 정의했는지에 따라서
- 함수 코드가 작성되는 시점에 스코프가 결정된다는 것을 의미합니다.
- 즉, 함수의 스코프는 함수가 호출되는 위치가 아니라 **함수가 정의되는 위치에 의해 결정**
- 함수 정의(함수 선언문 또는 함수 표현식)가 실행되어 생성된 함수 객체는 이렇게 결정된 상위 스코프를 기억한다.
- 함수가 호출될때 함수의 상위 스코프를 참조할 필요가 있기 때문


1. **상위 스코프(Upper Scope)**: 이는 현재 스코프에서 바깥쪽에 있는 스코프를 의미합니다. 예를 들어, 함수 내부에서 바깥쪽에 있는 함수 또는 전역 스코프를 '상위 스코프'라고 합니다. 상위 스코프의 변수와 함수는 내부 스코프에서 접근 가능하지만, 내부 스코프의 변수들은 상위 스코프에서 접근할 수 없습니다.
    
2. **하위 스코프(Lower Scope)**: 이는 현재 스코프 내부에 있는 스코프를 의미합니다. 예를 들어, 함수 안에 정의된 또 다른 함수의 스코프는 '하위 스코프'에 해당합니다. 하위 스코프는 바깥쪽 스코프의 변수와 함수에 접근할 수 있습니다.



